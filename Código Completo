#include <stdio.h>
#include <stdlib.h>
#include <string.h>

/* run this program using the console pauser or add your own getch, system("pause") or input loop */
#define numeroMaximoDeProdutos 20

int numeroDeProdutos = 0;
char nome[numeroMaximoDeProdutos][50];
char plataforma[numeroMaximoDeProdutos][50] ;
float preco[numeroMaximoDeProdutos];
int estoque[numeroMaximoDeProdutos];
char codigo[numeroMaximoDeProdutos][50];


void cadastroDeProdutos() {
	if(numeroDeProdutos < numeroMaximoDeProdutos) {
		printf("Digite o nome do produto %d: ",numeroDeProdutos+1) ;
		scanf(" %[^\n]", nome[numeroDeProdutos]);
		
		printf("\nDigite a plataforma do produto %d: ",numeroDeProdutos+1) ;
		scanf(" %[^\n]", plataforma[numeroDeProdutos]);
		
		while(1) {
			printf("\nDigite o preco do produto %d: ",numeroDeProdutos+1) ;
			if(scanf("%f",&preco[numeroDeProdutos]) == 1) {
				break;
			}else{
				printf("\n\nVoce digitou uma informacao errada,digite novamente\n\n") ;
				while (getchar() != '\n');
			}
		}
		
		while(1) {
			printf("\nDigite o estoque do produto %d: ",numeroDeProdutos+1) ;
			if(scanf("%d",&estoque[numeroDeProdutos]) == 1) {
				break;
			}else{
				printf("\n\nVoce digitou uma informacao errada,digite novamente\n\n") ;
				while (getchar() != '\n');				
			} 	
		}
		
		printf("\nDigite o codigo do produto %d: ",numeroDeProdutos+1) ;
		scanf(" %[^\n]", codigo[numeroDeProdutos]);
		
		printf("\n\nProduto cadastrado!\n") ;
		numeroDeProdutos++;
		
		}else{
		printf("\n\nVoce atingiu o limite de produtos.") ;
		
	}	
}

void consultaDeEstoque() {
	int i;
	char busca[50] ;
	int comparacao;
	
	printf("Digite o nome ou o codigo ou a plataforma do produto: ") ;
	scanf(" %[^\n]",busca);
	
	
	for(i = 0;i<numeroDeProdutos;i++) {
		comparacao = strcmp(busca,nome[i]);
		if(comparacao == 0) {
			printf("Nome: %s\nPlataforma: %s\nEstoque: %d\nPreco: %2.f\nCodigo: %s \n\n",nome[i],plataforma[i],estoque[i],preco[i],codigo[i]) ;
			return;
		}
		comparacao = strcmp(busca,plataforma[i]) ;
		if(comparacao == 0) {
			printf("Nome: %s\nPlataforma: %s\nEstoque: %d\nPreco: %2.f\nCodigo: %s \n\n",nome[i],plataforma[i],estoque[i],preco[i],codigo[i]) ;
			return;	
		}
		comparacao = strcmp(busca,codigo[i]) ;
		if(comparacao == 0) {
			printf("Nome: %s\nPlataforma: %s\nEstoque: %d\nPreco: %2.f\nCodigo: %s \n\n",nome[i],plataforma[i],estoque[i],preco[i],codigo[i]) ;
			return;	
		}
	}
	printf("\nNao foi encontrado nenhum produto\n") ;
}

int main(int argc, char *argv[]) {
	char opcao;
	
	while(opcao != '4') {
		printf("Game Store Cesupinha Argo\n1 - Cadastrar Produtos\n2 - Consulta De Estoque\n3 - Registro de Vendas\n4 - Finalizar\n");
		scanf(" %c",&opcao);
		
		if(opcao == '1') {
			cadastroDeProdutos();
		}
		else if(opcao == '2') {
			consultaDeEstoque();
		}
		else if(opcao == '3') {
			
		}
		else if(opcao == '4') {
			printf("Encerrando o programa....");
			return 0;
		}
		else{
			printf("Digite um comando valido!\n\n");
			
		}	
	}
	return 0;
}
